ИДЗ 2, ОСИ

Баханкова Дарья Сергеевна
БПИ215

Вариант 10

Программа реализована на 6 баллов

Данный код реализует задачу синхронизации процессов с использованием семафоров.

В начале кода объявляются необходимые библиотеки. Затем задаются константы NUM_DEPARTMENTS, NUM_CUSTOMERS и NUM_PURCHASES. Они определяют количество отделов, количество покупателей и количество покупок каждого покупателя.

Функция customer() реализует поведение каждого покупателя. Она выбирает случайный отдел, пытается заблокировать семафор для этого отдела, покупает товар, и разблокирует семафор. Этот процесс повторяется NUM_PURCHASES раз для каждого покупателя.

Функция main() создает массив семафоров semaphores, инициализирует каждый семафор в массиве, создает процессы для каждого покупателя, ждет завершения всех дочерних процессов, и закрывает и удаляет каждый семафор.

В цикле создания семафоров каждый семафор инициализируется с числом 1, что делает его изначально доступным для использования (так как каждая касса должна быть изначально свободна)

Тестирование.

Код может не выдавать правильный результат с первого раза, его нужно перезапустить, это связано с особенностями среды исполнения. 

В данных условиях сложно показать параллельность и гонку ресурсов:

![telegram-cloud-photo-size-2-5343861381734189732-y](https://user-images.githubusercontent.com/90968766/233864920-e61efa20-4056-4ac6-95c3-cff12cb298e0.jpg)

Для того, чтобы ее отобразить, можно увеличить количество покупок покупателей:

![telegram-cloud-photo-size-2-5345797952423185129-y](https://user-images.githubusercontent.com/90968766/233865013-5f1d6b88-07a4-416e-87c5-9bdef6e3eeed.jpg)

